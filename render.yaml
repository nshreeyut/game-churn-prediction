# Render Deployment Configuration
# ==================================
# Render reads this file to know how to build and run your FastAPI backend.
# Commit this file to your repo — Render picks it up automatically.
#
# DEPLOY STEPS:
#   1. Push your repo to GitHub
#   2. Go to render.com → New → Web Service → Connect your repo
#   3. Render detects this file and configures the service automatically
#   4. Add environment variables in Render's dashboard:
#        OPENAI_API_KEY = your key
#        (any other keys your collectors need)
#
# FREE TIER NOTE:
#   Render's free tier spins down after 15 min of inactivity.
#   The first request after spin-down takes ~30s to respond.
#   This is fine for demos. Upgrade to paid for production.

services:
  - type: web
    name: game-churn-api
    runtime: python
    buildCommand: pip install -e . && pip install -r api/requirements.txt
    startCommand: uvicorn api.main:app --host 0.0.0.0 --port $PORT
    envVars:
      - key: OPENAI_API_KEY
        sync: false        # set this manually in Render's dashboard (never commit API keys)
      - key: PYTHON_VERSION
        value: "3.12"
